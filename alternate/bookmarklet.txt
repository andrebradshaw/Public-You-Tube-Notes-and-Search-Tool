javascript:(function()%7Bvar reg %3D (o%2C n) %3D> o %3F o%5Bn%5D %3A ''%3Bvar cn %3D (o%2C s) %3D> o %3F o.getElementsByClassName(s) %3A console.log(o)%3Bvar tn %3D (o%2C s) %3D> o %3F o.getElementsByTagName(s) %3A console.log(o)%3Bvar gi %3D (o%2C s) %3D> o %3F o.getElementById(s) %3A console.log(o)%3Bvar rando %3D (n) %3D> Math.round(Math.random() * n)%3Bvar unq %3D (arr) %3D> arr.filter((e%2C p%2C a) %3D> a.indexOf(e) %3D%3D p)%3Bvar delay %3D (ms) %3D> new Promise(res %3D> setTimeout(res%2C ms))%3Bvar ele %3D (t) %3D> document.createElement(t)%3Bvar attr %3D (o%2C k%2C v) %3D> o.setAttribute(k%2C v)%3Bvar appsScriptWebAppLink %3D 'https%3A%2F%2Fscript.google.com%2Fmacros%2Fs%2FAKfycbx-kICzlYKC8qDPbaGhCKZnQ90NeYEBtJ6PiMCZjh6eIwF4QZ09%2Fexec'%3Bfunction aninCloseBtn() %7Bvar l1 %3D tn(this%2C 'path')%5B0%5D%3Bvar l2 %3D tn(this%2C 'path')%5B1%5D%3Bl1.style.transform %3D "translate(49px%2C 50px) rotate(45deg) translate(-49px%2C -50px)"%3Bl1.style.transition %3D "all 233ms"%3Bl2.style.transform %3D "translate(49px%2C 50px) rotate(135deg) translate(-49px%2C -50px)"%3Bl2.style.transition %3D "all 233ms"%3B%7Dfunction anoutCloseBtn() %7Bvar l1 %3D tn(this%2C 'path')%5B0%5D%3Bvar l2 %3D tn(this%2C 'path')%5B1%5D%3Bl1.style.transform %3D "translate(49px%2C 50px) rotate(225deg) translate(-49px%2C -50px)"%3Bl1.style.transition %3D "all 233ms"%3Bl2.style.transform %3D "translate(49px%2C 50px) rotate(225deg) translate(-49px%2C -50px)"%3Bl2.style.transition %3D "all 233ms"%3B%7Dfunction closeView() %7Bthis.parentElement.parentElement.outerHTML %3D ''%3B%7Dfunction dragElement() %7Bvar el %3D this.parentElement%3Bvar pos1 %3D 0%2Cpos2 %3D 0%2Cpos3 %3D 0%2Cpos4 %3D 0%3Bif (document.getElementById(this.id)) document.getElementById(this.id).onmousedown %3D dragMouseDown%3Belse this.onmousedown %3D dragMouseDown%3Bfunction dragMouseDown(e) %7Bpos3 %3D e.clientX%3Bpos4 %3D e.clientY%3Bdocument.onmouseup %3D closeDragElement%3Bdocument.onmousemove %3D elementDrag%3B%7Dfunction elementDrag(e) %7Bpos1 %3D pos3 - e.clientX%3Bpos2 %3D pos4 - e.clientY%3Bpos3 %3D e.clientX%3Bpos4 %3D e.clientY%3Bel.style.top %3D (el.offsetTop - pos2) %2B "px"%3Bel.style.left %3D (el.offsetLeft - pos1) %2B "px"%3Bel.style.opacity %3D "0.85"%3Bel.style.transition %3D "opacity 700ms"%3B%7Dfunction closeDragElement() %7Bdocument.onmouseup %3D null%3Bdocument.onmousemove %3D null%3Bel.style.opacity %3D "1"%3B%7D%7Dfunction convertTime2Secs(str) %7Bvar timehours %3D %2F%5E%5Cd%2B%3A%5Cd%2B%3A%5Cd%2B%24%2F.exec(str)%3Bvar timemins %3D %2F%5E%5Cd%2B%3A%5Cd%2B%24%2F.exec(str)%3Bvar hour %3D timehours %3F parseInt(%2F%5E(%5Cd%2B)%3A%2F.exec(timehours%5B0%5D)%5B1%5D) %3A 0%3Bvar mins %3D timemins %3F parseInt(%2F%5E(%5Cd%2B)%3A%2F.exec(timemins%5B0%5D)%5B1%5D) %3A 0%3Bvar secs %3D timemins %3F parseInt(%2F%5Cd%2B%24%2F.exec(timemins%5B0%5D)%5B0%5D) %3A 0%3Breturn ((hour * (60 * 60)) %2B (mins * 60) %2B (secs))%3B%7Dfunction createYTnotesHTML() %7Bif (gi(document%2C 'youtube_note_search_container')) gi(document%2C 'youtube_note_search_container').outerHTML %3D ''%3Bvar docRec %3D document.body.getBoundingClientRect()%3Bvar docW %3D docRec.right - docRec.left%3Bvar contWidth %3D Math.ceil(docW*0.4)%3Bvar cont %3D ele('div')%3Battr(cont%2C 'id'%2C 'youtube_note_search_container')%3Battr(cont%2C 'style'%2C %60position%3A fixed%3B top%3A 5%25%3B left%3A 10%25%3B width%3A %24%7BcontWidth%7Dpx%3B z-index%3A 13100%3B%60)%3Bdocument.body.appendChild(cont)%3Bvar head %3D ele('div')%3Battr(head%2C 'style'%2C %60display%3A grid%3B grid-template-columns%3A %24%7BcontWidth*.93%7Dpx %24%7BcontWidth*.07%7Dpx%3B background%3A %23063842%3B border%3A 1.3px solid %23021c21%3B border-top-left-radius%3A 0.3em%3B border-top-right-radius%3A 0.3em%3B cursor%3A move%3B%60)%3Bcont.appendChild(head)%3Bhead.onmouseover %3D dragElement%3Bvar htxt %3D ele('div')%3Battr(htxt%2C 'style'%2C %60grid-area%3A 1 %2F 1%3B color%3A %23fff%3B padding%3A 9px%3B%60)%3Bhead.appendChild(htxt)%3Bhtxt.innerText %3D 'Source Notes'%3Bvar cls %3D ele('div')%3Battr(cls%2C 'style'%2C %60grid-area%3A 1 %2F 2%3B width%3A 32px%3B height%3A 32px%3B cursor%3A pointer%3B%60)%3Bhead.appendChild(cls)%3Bcls.innerHTML %3D %60<svg x%3D"0px" y%3D"0px" viewBox%3D"0 0 100 100"><g style%3D"transform%3A scale(0.85%2C 0.85)" stroke-width%3D"1" fill%3D"none" fill-rule%3D"evenodd" stroke-linecap%3D"round" stroke-linejoin%3D"round"><g transform%3D"translate(2%2C 2)" stroke%3D"%23e21212" stroke-width%3D"8"><path d%3D"M47.806834%2C19.6743435 L47.806834%2C77.2743435" transform%3D"translate(49%2C 50) rotate(225) translate(-49%2C -50) "%2F><path d%3D"M76.6237986%2C48.48 L19.0237986%2C48.48" transform%3D"translate(49%2C 50) rotate(225) translate(-49%2C -50) "%2F><%2Fg><%2Fg><%2Fsvg>%60%3Bcls.onmouseenter %3D aninCloseBtn%3Bcls.onmouseleave %3D anoutCloseBtn%3Bcls.onclick %3D closeView%3Bvar cbod %3D ele('div')%3Battr(cbod%2C 'style'%2C %60display%3A grid%3B grid-template-rows%3A auto%3B grid-gap%3A 10px%3B border%3A 1.3px solid %23021c21%3B border-bottom-left-radius%3A 0.3em%3B border-bottom-right-radius%3A 0.3em%3B background%3A %239c9c9c%3B padding%3A 12px%3B%60)%3Bcont.appendChild(cbod)%3Bvar c3 %3D ele('div')%3Battr(c3%2C 'style'%2C %60display%3A grid%3B grid-template-columns%3A 89%25%3B grid-gap%3A 2%25%3B%60)%3Bcbod.appendChild(c3)%3Bvar c1 %3D ele('div')%3Battr(c1%2C 'style'%2C %60display%3A grid%3B grid-template-columns%3A 89%25 9%25%3B grid-gap%3A 2%25%3B%60)%3Bcbod.appendChild(c1)%3Bvar c2 %3D ele('div')%3Battr(c2%2C 'style'%2C %60display%3A grid%3B grid-template-columns%3A 89%25 9%25%3B grid-gap%3A 2%25%3B%60)%3Bcbod.appendChild(c2)%3Bvar user %3D ele('input')%3Battr(user%2C 'id'%2C 'save_user_val')%3Battr(user%2C 'placeholder'%2C 'username - if you wish to share')%3Battr(user%2C 'style'%2C %60grid-area%3A 1 %2F 1%3B border%3A 1px solid transparent%3B border-radius%3A 0.3em%3B padding%3A 2px%3B%60)%3Bc3.appendChild(user)%3Bvar setnote %3D ele('input')%3Battr(setnote%2C 'id'%2C 'save_note_val')%3Battr(setnote%2C 'placeholder'%2C 'Save note')%3Battr(setnote%2C 'style'%2C %60grid-area%3A 1 %2F 1%3B border%3A 1px solid transparent%3B border-radius%3A 0.3em%3B padding%3A 2px%3B cursor%3A pointer%3B%60)%3Bc1.appendChild(setnote)%3Bsetnote.onkeyup %3D enterSearch%3Bvar setbtn %3D ele('div')%3Battr(setbtn%2C 'style'%2C %60grid-area%3A 1 %2F 2%3B background%3A transparent%3B max-width%3A 32px%3B max-height%3A 32px%3B%60)%3Bsetbtn.innerHTML %3D %60<svg xmlns%3D"http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" xmlns%3Axlink%3D"http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink" version%3D"1.1" x%3D"0px" y%3D"0px" viewBox%3D"0 0 294.156 294.156" style%3D"enable-background%3Anew 0 0 294.156 294.156%3B" xml%3Aspace%3D"preserve"><g><path fill%3D"%23086173" d%3D"M227.002%2C108.256c-2.755-41.751-37.6-74.878-80.036-74.878c-42.447%2C0-77.298%2C33.141-80.038%2C74.907   C28.978%2C113.059%2C0%2C145.39%2C0%2C184.184c0%2C42.234%2C34.36%2C76.595%2C76.595%2C76.595h116.483c3.313%2C0%2C6-2.687%2C6-6s-2.687-6-6-6H76.595   C40.977%2C248.778%2C12%2C219.801%2C12%2C184.184c0-34.275%2C26.833-62.568%2C61.087-64.411c3.184-0.171%2C5.678-2.803%2C5.678-5.991   c0-0.119-0.003-0.236-0.01-0.355c0.09-37.536%2C30.654-68.049%2C68.211-68.049c37.563%2C0%2C68.132%2C30.518%2C68.211%2C68.063   c-0.005%2C0.116-0.009%2C0.238-0.009%2C0.329c0%2C3.196%2C2.505%2C5.831%2C5.696%2C5.992c34.37%2C1.741%2C61.292%2C30.038%2C61.292%2C64.421   c0%2C19.526-8.698%2C37.801-23.864%2C50.138c-2.571%2C2.091-2.959%2C5.87-0.868%2C8.44c2.091%2C2.571%2C5.87%2C2.959%2C8.44%2C0.868   c17.98-14.626%2C28.292-36.293%2C28.292-59.447C294.156%2C145.269%2C265.08%2C112.926%2C227.002%2C108.256z"%2F><path fill%3D"%23086173" d%3D"M140.966%2C141.078v76.511c0%2C3.313%2C2.687%2C6%2C6%2C6s6-2.687%2C6-6v-76.511c0-3.313-2.687-6-6-6S140.966%2C137.765%2C140.966%2C141.078z"%2F><path fill%3D"%23086173" d%3D"M181.283%2C152.204c1.536%2C0%2C3.071-0.586%2C4.243-1.757c2.343-2.343%2C2.343-6.142%2C0-8.485l-34.317-34.317   c-2.343-2.343-6.143-2.343-8.485%2C0l-34.317%2C34.317c-2.343%2C2.343-2.343%2C6.142%2C0%2C8.485c2.343%2C2.343%2C6.143%2C2.343%2C8.485%2C0   l30.074-30.074l30.074%2C30.074C178.212%2C151.618%2C179.748%2C152.204%2C181.283%2C152.204z"%2F><%2Fg><g><%2Fg><g><%2Fg><g><%2Fg><g><%2Fg><g><%2Fg><g><%2Fg><g><%2Fg><g><%2Fg><g><%2Fg><g><%2Fg><g><%2Fg><g><%2Fg><g><%2Fg><g><%2Fg><g><%2Fg><%2Fsvg>%60%3Bc1.appendChild(setbtn)%3Bsetbtn.onclick %3D createNotesHTML%3Bsetbtn.onmouseenter %3D btnhoverin%3Bsetbtn.onmouseleave %3D btnhoverout%3Bvar searchnote %3D ele('input')%3Battr(searchnote%2C 'id'%2C 'search_note_val')%3Battr(searchnote%2C 'placeholder'%2C 'Search notes')%3Battr(searchnote%2C 'style'%2C %60grid-area%3A 1 %2F 1%3B border%3A 1px solid transparent%3B border-radius%3A 0.3em%3B padding%3A 2px%3B %60)%3Bc2.appendChild(searchnote)%3Bsearchnote.onkeyup %3D enterSearch%3Bvar searchbtn %3D ele('div')%3Battr(searchbtn%2C 'style'%2C %60grid-area%3A 1 %2F 2%3B background%3A transparent%3B max-width%3A 32px%3B max-height%3A 32px%3B cursor%3A pointer%3B%60)%3Bsearchbtn.innerHTML %3D %60<svg enable-background%3D"new 0 0 129 129" viewBox%3D"0 0 129 129" version%3D"1.1" xmlns%3Axlink%3D"http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink" xmlns%3D"http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg"><g><path fill%3D"%23086173" d%3D"M51.6%2C96.7c11%2C0%2C21-3.9%2C28.8-10.5l35%2C35c0.8%2C0.8%2C1.8%2C1.2%2C2.9%2C1.2s2.1-0.4%2C2.9-1.2c1.6-1.6%2C1.6-4.2%2C0-5.8l-35-35   c6.5-7.8%2C10.5-17.9%2C10.5-28.8c0-24.9-20.2-45.1-45.1-45.1C26.8%2C6.5%2C6.5%2C26.8%2C6.5%2C51.6C6.5%2C76.5%2C26.8%2C96.7%2C51.6%2C96.7z M51.6%2C14.7   c20.4%2C0%2C36.9%2C16.6%2C36.9%2C36.9C88.5%2C72%2C72%2C88.5%2C51.6%2C88.5c-20.4%2C0-36.9-16.6-36.9-36.9C14.7%2C31.3%2C31.3%2C14.7%2C51.6%2C14.7z"%2F><%2Fg><%2Fsvg>%60%3Bc2.appendChild(searchbtn)%3Bsearchbtn.onclick %3D searchNotes%3Bsearchbtn.onmouseenter %3D btnhoverin%3Bsearchbtn.onmouseleave %3D btnhoverout%3B%7Dfunction btnhoverin() %7Bthis.style.transform %3D 'scale(1.2%2C 1.2)'%3Bthis.style.transition %3D 'all 111ms'%3B%7Dfunction btnhoverout() %7Bthis.style.transform %3D 'scale(1%2C 1)'%3Bthis.style.transition %3D 'all 111ms'%3B%7Dfunction enterSearch(e) %7Bif (e.key %3D%3D 'Enter') %7Bif (this.getAttribute('id') %3D%3D 'search_note_val') searchNotes()%3Bif (this.getAttribute('id') %3D%3D 'save_note_val') createNotesHTML()%3B%7D%7Dfunction searchNotes() %7Bvar search_input %3D gi(document%2C 'search_note_val').value%3Bvar search_notes %3D %60%24%7BappsScriptWebAppLink%7D%3Fsearch%3D%24%7BencodeURIComponent(search_input)%7D%60%3Bif (search_input) window.open(search_notes)%3B%7Dasync function getTimestamp() %7Bvar sharebtn %3D Array.from(cn(document%2C 'style-scope ytd-button-renderer style-default size-default')).filter(el %3D> %2FShare%2Fi.test(el.innerText))%3Bsharebtn%5B0%5D.click()%3Bawait delay(1033)%3Bvar time %3D gi(document%2C 'start-at-timestamp').value.trim()%3Bvar timestamp %3D convertTime2Secs(time)%3Bawait delay(333)%3Bvar closer %3D Array.from(tn(document%2C 'yt-icon')).filter(el %3D> el.getAttribute('icon') %3D%3D 'close')%3Bif (closer %26%26 closer%5B0%5D) closer%5B0%5D.click()%3Breturn timestamp%3B%7Dasync function createNotesHTML() %7Bif(%2Fyoutu%5C.be%7Cyoutube%5C.com%5C%2Fwatch%2Fi.test(window.location.href))%7Bvar timestamp %3D await getTimestamp()%3Bvar videoId %3D reg(%2Fyoutube%5C.com%5C%2Fwatch%5C%3Fv%3D(.%2B%3F)(%5C%3F%7C%24)%2F.exec(window.location.href)%2C 1) %3F reg(%2Fyoutube%5C.com%5C%2Fwatch%5C%3Fv%3D(.%2B%3F)(%5C%3F%7C%24)%2F.exec(window.location.href)%2C 1) %3A reg(%2Fyoutu%5C.be%5C%2F(.%2B%3F)(%5C%3F%7C%24)%2F.exec(window.location.href)%2C 1)%3Bvar linkOutput %3D encodeURIComponent(%60https%3A%2F%2Fyoutu.be%2F%24%7BvideoId%7D%3Ft%3D%24%7Btimestamp%7D%60)%3B%7Delse%7Bvar linkOutput %3D encodeURIComponent(window.location.href)%7Dvar notes %3D gi(document%2C 'save_note_val').value.trim()%3Bvar username %3D gi(document%2C 'save_user_val').value.trim()%3Bvar send_to_sheets %3D %60%24%7BappsScriptWebAppLink%7D%3Flink%3D%24%7BlinkOutput%7D%26notes%3D%24%7Bnotes%7D%26user%3D%24%7Busername%7D%60%3Bif (notes) window.open(send_to_sheets)%3B%7DcreateYTnotesHTML()%7D)()
